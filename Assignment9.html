<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Assignment 9: JSON Song List</title>
        <script   src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>
        
    </head>
    <body>
        <header>
            <h1>Assignment 9: JSON Song List</h1>
        </header>
        <h2>Part 2: Serialize and Display</h2>
        <div id="serialized"></div>
        <h2>Part 3: User Friendly Display</h2>
        <div id="table"></div>
        <h2>Part 4: Filter the Data</h2>
        <div id="d_form">
            <form id="gen_form">
                <label for="genres">Choose a Genre:</label>
                <select id="genres">
                    <option value="Rap">Rap</option>
                    <option value="Hip Hop">Hip Hop</option>
                    <option value="R and B">R and B</option>

                </select>
                <button type="button" onclick="genreSelect()">Select</button>
            </form>
        <div id="select"><div>
        <script language="javascript">
    	$.getJSON( "https://saramorrison.github.io/Assignment9/song.json", 
    		  function(data) { 
                  dataString=JSON.stringify(data);
                  document.getElementById("serialized").innerHTML=dataString + "<br><br><br>";
                  function1(data);
              })
              
              function function1(data)
              {
                  string=""
                  data.forEach(function(song){
                      genreString=song.genre[0]
                      if(song.genre.length >1){
                          for (n=1; n<song.genre.length; n++)
                          {
                              genreString+=",&nbsp;"+song.genre[n]
                          }   
                      }
                      string+="<p id='song'>"+song.title+"<br>Artist: "+song.artist+"<br>Genre: "+genreString+"<br>Year: "+song.release+"<br></p>"
                  })
                  document.getElementById("table").innerHTML+=string
              }
              
            function genreSelect()
            {
                $.getJSON( "https://saramorrison.github.io/Assignment9/song.json", 
            		  function(data) 
                      { 
                          genre=document.getElementById("genres").value;
                          document.getElementById("select").innerHTML=""
                          data.forEach(function(song)
                          {
                              string="";
                              for (n=0; n<song.genre.length; n++)
                              {
                                  if (song.genre[n] == genre)
                                  {
                                      string+="<p id='song'>"+song.title+"<br>Artist: "+song.artist+"<br>Year: "+song.release+"<br></p>"
                                      document.getElementById("select").innerHTML+=string
                                  }
                              }                     
                          })
                      })
                  }
        </script>
    </body>
</html>
